# Tesla Wrap Studio 🚗✨

专业车身改色与拉花设计工具 - Web 版

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![React](https://img.shields.io/badge/React-18.2-61dafb.svg)
![Fabric.js](https://img.shields.io/badge/Fabric.js-5.3-orange.svg)

## ✨ 功能特性

### 核心功能
- 🎨 **智能遮罩处理** - 自动识别车身区域，外部自动遮盖
- 📦 **贴图层管理** - 支持导入、拖拽、旋转、缩放、层级调整
- ✍️ **文字填充** - 在车身区域内生成重复文字图案
- 🖼️ **高质量导出** - 保持原模板分辨率，PNG 透明背景
- 📱 **跨平台** - 浏览器即可使用，无需安装

### 高级编辑功能
- ↩️ **撤销/重做** - 支持最多50步历史记录 (Ctrl+Z / Ctrl+Shift+Z)
- ↔️ **翻转功能** - 水平翻转 / 垂直翻转
- 👁️ **透明度调节** - 0-100% 精确控制
- 📐 **非等比缩放** - 可切换等比/自由缩放模式，独立调整宽高
- ✂️ **裁切工具** - 选中图片后自由裁切
- 📋 **快速复制** - Ctrl+D 一键复制图层

### 预设图案库
- 🏁 **25+ 款预设图案** - 程序化生成，无版权问题
- 📁 **7 大分类** - 条纹、渐变、几何、纹理、图案、迷彩等
- 🎨 **一键应用** - 点击即可添加到画布

## ⌨️ 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + Z` | 撤销 |
| `Ctrl + Shift + Z` | 重做 |
| `Ctrl + D` | 复制选中图层 |
| `Delete` / `Backspace` | 删除选中图层 |
| `↑ ↓ ← →` | 微调位置 (1px) |
| `Shift + 方向键` | 快速移动 (10px) |

## 📖 使用指南

1. **选择车型** - 从下拉菜单中选择 Tesla 车型（支持9款车型）
2. **添加图案** - 从预设图案库选择，或点击「导入图案/改色膜」上传自定义图片
3. **调整图案** - 拖拽移动，使用工具栏翻转/裁切，滑块调整透明度、旋转和缩放
4. **文字填充** - 切换到文字标签，输入文字后点击「生成文字填充」
5. **导出设计** - 点击「导出高清设计图」保存作品

## 🎨 预设图案

所有预设图案均为程序化生成，无版权问题：

| 分类 | 图案 |
|------|------|
| 条纹 | 赛车条纹（红/黑/金）、斜条纹（红黑/白灰）、闪电条纹 |
| 渐变 | 日落、海洋、紫霞、暗夜 |
| 几何 | 蜂窝网格（红/蓝/金线）、几何三角（暗色/彩色） |
| 纹理 | 碳纤维纹理（黑/红） |
| 图案 | 波浪纹、点阵渐变（中心/水平） |
| 迷彩 | 军绿、都市灰、沙漠 |

## 🛠️ 技术栈

- **React 18** - 现代 UI 框架
- **Fabric.js** - 强大的 Canvas 操作库
- **Tailwind CSS** - 原子化 CSS 框架
- **Vite** - 极速构建工具
- **Lucide React** - 精美图标库

## 📁 项目结构

```
root/
├── public/
│   └── assets/              # 车型模板图片 (9款Tesla车型)
├── src/
│   ├── utils/
│   │   ├── maskProcessor.js    # 遮罩处理算法
│   │   ├── textGenerator.js    # 文字填充生成器
│   │   └── patternGenerator.js # 预设图案生成器
│   ├── App.jsx              # 主应用组件
│   ├── main.jsx             # 入口文件
│   └── index.css            # 全局样式
├── index.html
├── package.json
├── vite.config.js
└── tailwind.config.js
```

## 🚀 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

## 🔧 核心算法

### 遮罩处理 (Flood Fill)

使用扫描线优化的泛洪填充算法，从图像四角开始填充，自动识别车身内外区域：

```javascript
// 三层结构
1. 线条区域 → 浅白色（车身轮廓）
2. 外部区域 → 背景色（遮盖外部）
3. 内部区域 → 透明（显示贴图）
```

### 文字填充

支持交错排列、旋转、自定义间距，仅在车身内部区域渲染文字。

### 预设图案生成

使用 Canvas API 程序化生成各类图案：
- 条纹：线性填充 + 旋转变换
- 渐变：线性/径向渐变
- 几何：数学计算生成六边形/三角形网格
- 纹理：交替填充模拟编织效果
- 迷彩：随机不规则多边形叠加

## 📄 许可证

MIT License

---

Made with ❤️ for Tesla enthusiasts
